<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Survey Toilet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to top, rgba(71, 193, 200, 0.94) 0%, rgba(253, 246, 236, 0.87) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            transition: background 0.8s ease;
        }

        body.report-page {
            background: linear-gradient(to top, #003538 0%, #B2AA9F 100%);
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(71, 193, 200, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(71, 193, 200, 0.06) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        body.report-page::before {
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.06) 0%, transparent 50%);
        }

        .decorative-icon {
            position: absolute;
            width: 60px;
            height: 60px;
            opacity: 0.3;
            filter: blur(0.5px);
            animation: float 15s ease-in-out infinite;
            pointer-events: all;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            cursor: pointer;
        }

        .decorative-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            animation: rotateIcon 20s linear infinite;
        }

        .decorative-icon img.show {
            display: block;
        }

        .decorative-icon span {
            display: block;
            animation: rotateIcon 20s linear infinite;
        }

        .decorative-icon.has-image span {
            display: none !important;
        }

        .decorative-icon-placeholder {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            border: 2px dashed rgba(255, 255, 255, 0.4);
            border-radius: 10px;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: rgba(0, 0, 0, 0.5);
            text-align: center;
            line-height: 1.2;
        }

        .decorative-icon:not(.has-image):hover .decorative-icon-placeholder {
            display: flex;
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(71, 193, 200, 0.6);
        }

        .decorative-icon.has-image {
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        @keyframes rotateIcon {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .icon1 { top: 5%; left: 8%; }
        .icon2 { top: 8%; right: 12%; }
        .icon3 { top: 25%; left: 5%; }
        .icon4 { top: 20%; right: 5%; }
        .icon5 { bottom: 10%; left: 8%; }
        .icon6 { bottom: 15%; right: 10%; }
        .icon7 { top: 8%; right: 45%; }
        .icon8 { bottom: 20%; left: 45%; }
        .icon9 { top: 35%; left: 2%; }
        .icon10 { bottom: 25%; right: 3%; }
        .icon11 { top: 55%; right: 8%; }
        .icon12 { bottom: 8%; left: 25%; }
        .icon13 { top: 60%; left: 3%; }
        .icon14 { bottom: 12%; right: 20%; }
        .icon15 { top: 42%; right: 4%; }
        .icon16 { bottom: 35%; left: 5%; }

        .container {
            background: transparent;
            padding: 50px 60px;
            max-width: 1100px;
            width: 95%;
            position: relative;
            z-index: 10;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .datetime-badge {
            position: absolute;
            top: 30px;
            left: 40px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            color: #2c3e50;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: slideIn 0.5s ease-out;
            line-height: 1.4;
        }

        body.report-page .datetime-badge {
            color: #fff;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo {
            position: absolute;
            top: 20px;
            right: 35px;
            cursor: pointer;
            transition: transform 0.3s ease;
            animation: slideIn 0.5s ease-out 0.1s backwards;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .logo-img {
            max-width: 140px;
            max-height: 80px;
            width: auto;
            height: auto;
            object-fit: contain;
        }

        .logo-placeholder {
            width: 140px;
            height: 60px;
            background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%);
            border: 2px dashed #4a9fd8;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: #4a9fd8;
            text-align: center;
            padding: 5px;
            line-height: 1.3;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logo-placeholder:hover {
            background: linear-gradient(135deg, #d4e9f2 0%, #c0dfe9 100%);
            border-color: #3498db;
        }

        .header {
            text-align: center;
            margin-bottom: 35px;
            margin-top: 20px;
            animation: fadeInUp 0.6s ease-out 0.2s backwards;
        }

        h1 {
            font-size: 32px;
            color: #2c3e50;
            margin-bottom: 8px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        body.report-page h1 {
            color: #ffffff;
        }

        h2 {
            font-size: 20px;
            color: #7f8c8d;
            font-weight: 400;
            font-style: italic;
        }

        body.report-page h2 {
            color: #e0e0e0;
        }

        .message-box {
            background: linear-gradient(135deg, #fff9e6 0%, #fffbf0 100%);
            border: 3px solid #FFF1C1;
            border-radius: 15px;
            padding: 15px 20px;
            margin-bottom: 40px;
            text-align: center;
            font-size: 16px;
            color: #5d5d5d;
            line-height: 1.8;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            animation: fadeInUp 0.6s ease-out 0.3s backwards;
        }

        body.report-page .message-box {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        body.report-page .message-box strong {
            color: #ffd700;
        }

        .message-box strong {
            color: #e67e22;
            font-size: 17px;
            text-transform: uppercase;
        }

        .emoji-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 35px;
            flex-wrap: wrap;
            animation: fadeInUp 0.6s ease-out 0.4s backwards;
        }

        .emoji-btn {
            width: 175px;
            background: transparent;
            border: none;
            padding: 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .emoji-btn:hover {
            transform: translateY(-8px);
        }

        .emoji-img {
            width: 165px;
            height: 165px;
            display: block;
            margin: 0 auto;
            object-fit: contain;
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.25));
            transition: all 0.3s ease;
        }

        .emoji-btn:hover .emoji-img {
            filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.35));
        }

        .emoji-placeholder {
            width: 165px;
            height: 165px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.4);
            border: 3px dashed rgba(100, 100, 100, 0.4);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
            text-align: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .emoji-placeholder:hover {
            background: rgba(255, 255, 255, 0.6);
            border-color: rgba(71, 193, 200, 0.6);
        }

        .report-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 35px;
            flex-wrap: wrap;
            animation: fadeInUp 0.6s ease-out 0.4s backwards;
        }

        .report-btn {
            width: 175px;
            background: transparent;
            border: none;
            padding: 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .report-btn:hover {
            transform: translateY(-8px);
        }

        .report-icon-img {
            width: 145px;
            height: 145px;
            display: block;
            margin: 0 auto;
            object-fit: contain;
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
            transition: all 0.3s ease;
        }

        .report-btn:hover .report-icon-img {
            filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.4));
        }

        .report-icon-placeholder {
            width: 145px;
            height: 145px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.15);
            border: 3px dashed rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .report-icon-placeholder:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .thank-you {
            text-align: center;
            padding: 80px 40px;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin: 40px auto;
            max-width: 700px;
            animation: fadeInUp 0.6s ease-out 0.3s backwards;
        }

        .thank-you h2 {
            color: #4a9fd8;
            font-size: 28px;
            margin-bottom: 25px;
            font-style: italic;
            font-weight: 600;
        }

        .thank-you p {
            color: #2c3e50;
            font-size: 20px;
            font-style: italic;
            line-height: 1.6;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            font-size: 12px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            animation: slideIn 0.5s ease-out 0.5s backwards;
        }

        body.report-page .footer {
            color: #ffffff;
        }

        .hidden {
            display: none;
        }

        #fullscreenBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 18px;
            border: none;
            border-radius: 10px;
            background: #47c1c8;
            color: white;
            font-size: 16px;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        /* ========== RESPONSIVE UNTUK TABLET ========== */
        @media (max-width: 1024px) {
            .container {
                padding: 40px 40px;
                width: 98%;
            }

            .datetime-badge {
                top: 20px;
                left: 20px;
                padding: 10px 18px;
                font-size: 12px;
            }

            .logo {
                top: 15px;
                right: 20px;
            }

            .logo-img {
                max-width: 110px;
                max-height: 65px;
            }

            .logo-placeholder {
                width: 110px;
                height: 50px;
                font-size: 10px;
            }

            h1 {
                font-size: 28px;
            }

            h2 {
                font-size: 18px;
            }

            .message-box {
                font-size: 14px;
                padding: 12px 18px;
            }

            .message-box strong {
                font-size: 15px;
            }

            .emoji-btn {
                width: 150px;
            }

            .emoji-img,
            .emoji-placeholder {
                width: 140px;
                height: 140px;
            }

            .report-btn {
                width: 150px;
            }

            .report-icon-img,
            .report-icon-placeholder {
                width: 120px;
                height: 120px;
            }

            .thank-you {
                padding: 60px 30px;
            }

            .thank-you h2 {
                font-size: 24px;
            }

            .thank-you p {
                font-size: 18px;
            }

            .decorative-icon {
                width: 50px;
                height: 50px;
                font-size: 32px;
            }
        }

        /* ========== RESPONSIVE UNTUK HP ========== */
        @media (max-width: 768px) {
            body {
                overflow-y: auto;
                overflow-x: hidden;
            }

            .container {
                padding: 25px 20px;
                width: 100%;
            }

            .datetime-badge {
                position: relative;
                top: 0;
                left: 0;
                margin: 0 auto 15px;
                padding: 8px 15px;
                font-size: 11px;
                width: fit-content;
            }

            .logo {
                position: relative;
                top: 0;
                right: 0;
                margin: 0 auto 20px;
                text-align: center;
                display: block;
            }

            .logo-img {
                max-width: 100px;
                max-height: 55px;
                margin: 0 auto;
            }

            .logo-placeholder {
                width: 100px;
                height: 45px;
                font-size: 9px;
                margin: 0 auto;
            }

            .header {
                margin-bottom: 25px;
                margin-top: 10px;
            }

            h1 {
                font-size: 22px;
                letter-spacing: 0.5px;
            }

            h2 {
                font-size: 15px;
            }

            .message-box {
                font-size: 13px;
                padding: 12px 15px;
                margin-bottom: 30px;
                line-height: 1.6;
            }

            .message-box strong {
                font-size: 14px;
            }

            .emoji-container,
            .report-container {
                gap: 12px;
                margin-top: 25px;
            }

            .emoji-btn {
                width: 110px;
            }

            .emoji-img,
            .emoji-placeholder {
                width: 100px;
                height: 100px;
                font-size: 10px;
            }

            .report-btn {
                width: 110px;
            }

            .report-icon-img,
            .report-icon-placeholder {
                width: 90px;
                height: 90px;
                font-size: 9px;
            }

            .thank-you {
                padding: 50px 25px;
                margin: 30px auto;
            }

            .thank-you h2 {
                font-size: 20px;
                margin-bottom: 15px;
            }

            .thank-you p {
                font-size: 16px;
            }

            .footer {
                font-size: 10px;
                margin-top: 30px;
                flex-wrap: wrap;
            }

            .decorative-icon {
                width: 35px;
                height: 35px;
                font-size: 24px;
            }

            /* Sembunyikan beberapa icon dekoratif di HP */
            .icon7, .icon8, .icon9, .icon10,
            .icon11, .icon12, .icon13, .icon14,
            .icon15, .icon16 {
                display: none;
            }

            #fullscreenBtn {
                bottom: 15px;
                right: 15px;
                padding: 8px 14px;
                font-size: 14px;
            }
        }

        /* ========== RESPONSIVE UNTUK HP KECIL ========== */
        @media (max-width: 480px) {
            .container {
                padding: 20px 15px;
            }

            h1 {
                font-size: 20px;
            }

            h2 {
                font-size: 14px;
            }

            .message-box {
                font-size: 12px;
                padding: 10px 12px;
            }

            .message-box strong {
                font-size: 13px;
            }

            .emoji-btn {
                width: 95px;
            }

            .emoji-img,
            .emoji-placeholder {
                width: 85px;
                height: 85px;
            }

            .report-btn {
                width: 95px;
            }

            .report-icon-img,
            .report-icon-placeholder {
                width: 75px;
                height: 75px;
            }

            .thank-you {
                padding: 40px 20px;
            }

            .thank-you h2 {
                font-size: 18px;
            }

            .thank-you p {
                font-size: 14px;
            }

            .decorative-icon {
                width: 30px;
                height: 30px;
                font-size: 20px;
            }
        }

        /* ========== LANDSCAPE MODE UNTUK HP ========== */
        @media (max-width: 768px) and (orientation: landscape) {
            .container {
                padding: 20px 30px;
            }

            .emoji-container,
            .report-container {
                gap: 10px;
            }

            .emoji-btn {
                width: 100px;
            }

            .emoji-img,
            .emoji-placeholder {
                width: 90px;
                height: 90px;
            }

            .report-btn {
                width: 100px;
            }

            .report-icon-img,
            .report-icon-placeholder {
                width: 80px;
                height: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="decorative-icon icon1" onclick="uploadDecorativeIcon('icon1')">
        <img id="decorIcon1" alt="Icon 1">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš½</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon2" onclick="uploadDecorativeIcon('icon2')">
        <img id="decorIcon2" alt="Icon 2">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš¿</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon3" onclick="uploadDecorativeIcon('icon3')">
        <img id="decorIcon3" alt="Icon 3">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§¼</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon4" onclick="uploadDecorativeIcon('icon4')">
        <img id="decorIcon4" alt="Icon 4">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§½</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon5" onclick="uploadDecorativeIcon('icon5')">
        <img id="decorIcon5" alt="Icon 5">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš½</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon6" onclick="uploadDecorativeIcon('icon6')">
        <img id="decorIcon6" alt="Icon 6">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§´</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon7" onclick="uploadDecorativeIcon('icon7')">
        <img id="decorIcon7" alt="Icon 7">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§»</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon8" onclick="uploadDecorativeIcon('icon8')">
        <img id="decorIcon8" alt="Icon 8">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš¿</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon9" onclick="uploadDecorativeIcon('icon9')">
        <img id="decorIcon9" alt="Icon 9">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§¼</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon10" onclick="uploadDecorativeIcon('icon10')">
        <img id="decorIcon10" alt="Icon 10">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš½</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon11" onclick="uploadDecorativeIcon('icon11')">
        <img id="decorIcon11" alt="Icon 11">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§½</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon12" onclick="uploadDecorativeIcon('icon12')">
        <img id="decorIcon12" alt="Icon 12">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§´</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon13" onclick="uploadDecorativeIcon('icon13')">
        <img id="decorIcon13" alt="Icon 13">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš¿</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon14" onclick="uploadDecorativeIcon('icon14')">
        <img id="decorIcon14" alt="Icon 14">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§»</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon15" onclick="uploadDecorativeIcon('icon15')">
        <img id="decorIcon15" alt="Icon 15">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸ§¼</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>
    <div class="decorative-icon icon16" onclick="uploadDecorativeIcon('icon16')">
        <img id="decorIcon16" alt="Icon 16">
        <span style="display: inline-block; animation: rotateIcon 20s linear infinite;">ðŸš½</span>
        <div class="decorative-icon-placeholder">Upload</div>
    </div>

    <div class="container">
        <div id="screen1">
            <div class="datetime-badge">
                <span id="currentDateTime"></span>
            </div>

            <div class="logo" onclick="refreshPage()">
                <img id="logoImage" class="logo-img" style="display: none;" alt="Logo">
                <div id="logoPlaceholder" class="logo-placeholder">Upload Logo<br>InJourney</div>
            </div>

            <div class="header">
                <h1>DIGITAL SURVEY TOILET</h1>
                <h2>Good Night</h2>
                <h2 style="margin-top: 5px;">Selamat Malam</h2>
            </div>

            <div class="message-box">
                <strong>Perhatian!</strong> untuk memberikan penilaian/polling/suara silahkan klik icon/Emoji<br>
                <strong>Attention!</strong> To give a rating/poll/vote, please click on the icon/Emoji.
            </div>

            <div class="emoji-container">
                <button class="emoji-btn" onclick="submitRating('excellent')">
                    <img id="emojiExcellent" class="emoji-img" style="display: none;" alt="Excellent">
                    <div id="emojiExcellentPlaceholder" class="emoji-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='emojiExcellent'; document.getElementById('fileUpload').click()">Upload Image</div>
                </button>
                <button class="emoji-btn" onclick="submitRating('good')">
                    <img id="emojiGood" class="emoji-img" style="display: none;" alt="Good">
                    <div id="emojiGoodPlaceholder" class="emoji-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='emojiGood'; document.getElementById('fileUpload').click()">Upload Image</div>
                </button>
                <button class="emoji-btn" onclick="submitRating('not-bad')">
                    <img id="emojiNotBad" class="emoji-img" style="display: none;" alt="Not Bad">
                    <div id="emojiNotBadPlaceholder" class="emoji-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='emojiNotBad'; document.getElementById('fileUpload').click()">Upload Image</div>
                </button>
                <button class="emoji-btn" onclick="submitRating('bad')">
                    <img id="emojiBad" class="emoji-img" style="display: none;" alt="Bad">
                    <div id="emojiBadPlaceholder" class="emoji-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='emojiBad'; document.getElementById('fileUpload').click()">Upload Image</div>
                </button>
                <button class="emoji-btn" onclick="submitRating('very-bad')">
                    <img id="emojiVeryBad" class="emoji-img" style="display: none;" alt="Very Bad">
                    <div id="emojiVeryBadPlaceholder" class="emoji-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='emojiVeryBad'; document.getElementById('fileUpload').click()">Upload Image</div>
                </button>
            </div>

            <div class="footer">
                <span>Â© 2025 InJourney Airports</span>
                <span>â€¢</span>
                <span>Digital Survey System</span>
            </div>
        </div>

        <div id="screen2" class="hidden">
            <div class="datetime-badge">
                <span id="currentDateTime2"></span>
            </div>

            <div class="logo" onclick="refreshPage()">
                <img id="logoImage2" class="logo-img" style="display: none;" alt="Logo">
                <div id="logoPlaceholder2" class="logo-placeholder">Upload Logo<br>InJourney</div>
            </div>

            <div class="thank-you" onclick="backToMain()">
                <h2>Terima Kasih Atas Penilaian Anda!!</h2>
                <p>Thank you for your feedback!!</p>
            </div>
        </div>

        <div id="screen3" class="hidden">
            <div class="datetime-badge">
                <span id="currentDateTime3"></span>
            </div>

            <div class="logo" onclick="refreshPage()">
                <img id="logoImage3" class="logo-img" style="display: none;" alt="Logo">
                <div id="logoPlaceholder3" class="logo-placeholder">Upload Logo<br>InJourney</div>
            </div>

            <div class="header">
                <h1>HALAMAN LAPORAN</h1>
                <h2>REPORT PAGE</h2>
                <h2 style="margin-top: 5px;">ã…¤</h2>
            </div>

            <div class="message-box">
                <strong>mohon maaf atas ketidak nyamanan anda,</strong> silahkan pilih alasan anda<br>
                <strong>We apologize for the inconvenience.</strong> Please select your reason.
            </div>

            <div class="report-container">
                <button class="report-btn" onclick="submitReport('foul-smell')">
                    <img id="reportFoulSmell" class="report-icon-img" style="display: none;" alt="Foul Smell">
                    <div id="reportFoulSmellPlaceholder" class="report-icon-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='reportFoulSmell'; document.getElementById('fileUpload').click()">Upload</div>
                </button>
                <button class="report-btn" onclick="submitReport('dirty-toilet')">
                    <img id="reportDirtyToilet" class="report-icon-img" style="display: none;" alt="Dirty Toilet">
                    <div id="reportDirtyToiletPlaceholder" class="report-icon-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='reportDirtyToilet'; document.getElementById('fileUpload').click()">Upload</div>
                </button>
                <button class="report-btn" onclick="submitReport('no-paper')">
                    <img id="reportNoPaper" class="report-icon-img" style="display: none;" alt="No Paper">
                    <div id="reportNoPaperPlaceholder" class="report-icon-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='reportNoPaper'; document.getElementById('fileUpload').click()">Upload</div>
                </button>
                <button class="report-btn" onclick="submitReport('wet-floor')">
                    <img id="reportWetFloor" class="report-icon-img" style="display: none;" alt="Wet Floor">
                    <div id="reportWetFloorPlaceholder" class="report-icon-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='reportWetFloor'; document.getElementById('fileUpload').click()">Upload</div>
                </button>
                <button class="report-btn" onclick="submitReport('bin-full')">
                    <img id="reportBinFull" class="report-icon-img" style="display: none;" alt="Bin Full">
                    <div id="reportBinFullPlaceholder" class="report-icon-placeholder" onclick="event.stopPropagation(); document.getElementById('fileUpload').dataset.target='reportBinFull'; document.getElementById('fileUpload').click()">Upload</div>
                </button>
            </div>

            <div class="footer">
                <span>Â© 2025 InJourney Airports</span>
                <span>â€¢</span>
                <span>Digital Survey System</span>
            </div>
        </div>

        <div id="screen4" class="hidden">
            <div class="datetime-badge">
                <span id="currentDateTime4"></span>
            </div>

            <div class="logo" onclick="refreshPage()">
                <img id="logoImage4" class="logo-img" style="display: none;" alt="Logo">
                <div id="logoPlaceholder4" class="logo-placeholder">Upload Logo<br>InJourney</div>
            </div>

            <div class="thank-you" onclick="backToMain()">
                <p style="margin-bottom: 20px;">maaf atas ketidak nyamanan Anda, Terima kasih atas penilaiannya</p>
                <p>We apologize for the inconvenience, Thank you for your feedback.</p>
            </div>
        </div>
    </div>

    <input type="file" id="fileUpload" accept="image/*" style="display: none;">

    <button id="fullscreenBtn">â›¶</button>

    <script>
        const btn = document.getElementById("fullscreenBtn");

        function openFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) {
                elem.msRequestFullscreen();
            }
            btn.style.display = "none";
        }

        function exitFullscreen() {
            const password = prompt("Masukkan kode keluar fullscreen:");
            const correctPassword = "1234";

            if (password === correctPassword) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            } else if (password !== null) {
                alert("Kode salah! Tidak bisa keluar fullscreen.");
            }
        }

        btn.addEventListener("click", openFullscreen);

        document.addEventListener("fullscreenchange", () => {
            if (!document.fullscreenElement) {
                setTimeout(() => {
                    if (!document.fullscreenElement) {
                        openFullscreen();
                    }
                }, 100);
            }
        });

        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
                e.preventDefault();
                exitFullscreen();
            }
        });

        let db;
        const DB_NAME = 'ToiletSurveyDB';
        const DB_VERSION = 1;

        function initDB() {
            const request = indexedDB.open(DB_NAME, DB_VERSION);
            request.onerror = () => console.error('Database failed');
            request.onsuccess = () => {
                db = request.result;
                loadAllImages();
            };
            request.onupgradeneeded = (e) => {
                db = e.target.result;
                if (!db.objectStoreNames.contains('ratings')) {
                    const ratingsStore = db.createObjectStore('ratings', { keyPath: 'id', autoIncrement: true });
                    ratingsStore.createIndex('rating', 'rating', { unique: false });
                    ratingsStore.createIndex('timestamp', 'timestamp', { unique: false });
                }
                if (!db.objectStoreNames.contains('reports')) {
                    const reportsStore = db.createObjectStore('reports', { keyPath: 'id', autoIncrement: true });
                    reportsStore.createIndex('issue', 'issue', { unique: false });
                    reportsStore.createIndex('timestamp', 'timestamp', { unique: false });
                }
                if (!db.objectStoreNames.contains('images')) {
                    db.createObjectStore('images', { keyPath: 'key' });
                }
            };
        }

        function saveToDatabase(storeName, data) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction([storeName], 'readwrite');
                const store = transaction.objectStore(storeName);
                const request = store.add(data);
                request.onsuccess = () => resolve();
                request.onerror = () => reject();
            });
        }

        function saveImage(key, value) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction(['images'], 'readwrite');
                const store = transaction.objectStore('images');
                const request = store.put({ key: key, value: value });
                request.onsuccess = () => resolve();
                request.onerror = () => reject();
            });
        }

        function getImage(key) {
            return new Promise((resolve, reject) => {
                const transaction = db.transaction(['images'], 'readonly');
                const store = transaction.objectStore('images');
                const request = store.get(key);
                request.onsuccess = () => resolve(request.result ? request.result.value : null);
                request.onerror = () => reject();
            });
        }

        function updateDateTime() {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const daysId = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const monthsId = ['Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun', 'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'];
            
            const now = new Date();
            const hour = now.getHours();
            const dayName = days[now.getDay()];
            const dayNameId = daysId[now.getDay()];
            const monthName = months[now.getMonth()];
            const monthNameId = monthsId[now.getMonth()];
            const date = now.getDate();
            const year = now.getFullYear().toString().slice(-2);
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            
            let greetingEn, greetingId;
            if (hour >= 5 && hour < 11) {
                greetingEn = 'Good Morning';
                greetingId = 'Selamat Pagi';
            } else if (hour >= 11 && hour < 15) {
                greetingEn = 'Good Afternoon';
                greetingId = 'Selamat Siang';
            } else if (hour >= 15 && hour < 18) {
                greetingEn = 'Good Evening';
                greetingId = 'Selamat Sore';
            } else {
                greetingEn = 'Good Night';
                greetingId = 'Selamat Malam';
            }
            
            const dateTimeString = `${dayName}, ${monthName} ${date} '${year} | ${hours}:${minutes}:${seconds}<br><small style="font-size: 11px; opacity: 0.8;">${dayNameId}, ${date} ${monthNameId} '${year}</small>`;
            
            document.getElementById('currentDateTime').innerHTML = dateTimeString;
            const dt2 = document.getElementById('currentDateTime2');
            const dt3 = document.getElementById('currentDateTime3');
            const dt4 = document.getElementById('currentDateTime4');
            if (dt2) dt2.innerHTML = dateTimeString;
            if (dt3) dt3.innerHTML = dateTimeString;
            if (dt4) dt4.innerHTML = dateTimeString;
            
            const headings = document.querySelectorAll('.header h2');
            headings.forEach((heading, index) => {
                if (index === 0) heading.textContent = greetingEn;
                else if (index === 1) heading.textContent = greetingId;
            });
        }

        function setupImageUploads() {
            const fileUpload = document.getElementById('fileUpload');
            const logoPlaceholders = ['logoPlaceholder', 'logoPlaceholder2', 'logoPlaceholder3', 'logoPlaceholder4'];
            
            logoPlaceholders.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('click', (e) => {
                        e.stopPropagation();
                        fileUpload.dataset.target = 'logo';
                        fileUpload.click();
                    });
                }
            });

            fileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                const target = fileUpload.dataset.target;
                if (file && target) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const imageData = event.target.result;
                        saveImage(target, imageData).then(() => {
                            displayImage(target, imageData);
                        });
                    };
                    reader.readAsDataURL(file);
                }
                fileUpload.value = '';
            });
        }

        function uploadDecorativeIcon(iconId) {
            const fileUpload = document.getElementById('fileUpload');
            fileUpload.dataset.target = iconId;
            fileUpload.click();
        }

        function displayImage(key, imageData) {
            if (key === 'logo') {
                for (let i = 1; i <= 4; i++) {
                    const img = document.getElementById('logoImage' + (i === 1 ? '' : i));
                    const placeholder = document.getElementById('logoPlaceholder' + (i === 1 ? '' : i));
                    if (img && imageData) {
                        img.src = imageData;
                        img.style.display = 'block';
                        if (placeholder) placeholder.style.display = 'none';
                    }
                }
            } else if (key.startsWith('emoji')) {
                const img = document.getElementById(key);
                const placeholder = document.getElementById(key + 'Placeholder');
                if (img && imageData) {
                    img.src = imageData;
                    img.style.display = 'block';
                    if (placeholder) placeholder.style.display = 'none';
                }
            } else if (key.startsWith('report')) {
                const img = document.getElementById(key);
                const placeholder = document.getElementById(key + 'Placeholder');
                if (img && imageData) {
                    img.src = imageData;
                    img.style.display = 'block';
                    if (placeholder) placeholder.style.display = 'none';
                }
            } else if (key.startsWith('icon')) {
                const img = document.getElementById('decor' + key.charAt(0).toUpperCase() + key.slice(1));
                const parent = img ? img.parentElement : null;
                if (img && imageData) {
                    img.src = imageData;
                    img.classList.add('show');
                    if (parent) parent.classList.add('has-image');
                }
            }
        }

        async function loadAllImages() {
            const logoData = await getImage('logo');
            if (logoData) displayImage('logo', logoData);

            const emojiTypes = ['Excellent', 'Good', 'NotBad', 'Bad', 'VeryBad'];
            for (const type of emojiTypes) {
                const data = await getImage('emoji' + type);
                if (data) displayImage('emoji' + type, data);
            }

            const reportTypes = ['FoulSmell', 'DirtyToilet', 'NoPaper', 'WetFloor', 'BinFull'];
            for (const type of reportTypes) {
                const data = await getImage('report' + type);
                if (data) displayImage('report' + type, data);
            }

            for (let i = 1; i <= 16; i++) {
                const data = await getImage('icon' + i);
                if (data) displayImage('icon' + i, data);
            }
        }

        function showScreen(screenId) {
            document.querySelectorAll('[id^="screen"]').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
            
            if (screenId === 'screen3') {
                document.body.classList.add('report-page');
            } else {
                document.body.classList.remove('report-page');
            }
        }

        function refreshPage() {
            showScreen('screen1');
        }

        function backToMain() {
            showScreen('screen1');
        }

        async function submitRating(rating) {
            const data = {
                rating: rating,
                timestamp: new Date().toISOString()
            };
            await saveToDatabase('ratings', data);
            if (rating === 'bad' || rating === 'very-bad') {
                showScreen('screen3');
            } else {
                showScreen('screen2');
            }
        }

        async function submitReport(issue) {
            const data = {
                issue: issue,
                timestamp: new Date().toISOString()
            };
            await saveToDatabase('reports', data);
            showScreen('screen4');
        }

        window.onload = () => {
            initDB();
            updateDateTime();
            setInterval(updateDateTime, 1000);
            setupImageUploads();
        };
    </script>
</body>
</html>